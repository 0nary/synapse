@using System.ComponentModel
@namespace Synapse.Dashboard
@inject ILayoutService Layout;
@implements IDisposable

<div class="header px-4">
    <div class="w-100 d-flex align-items-center justify-content-between">
        @Layout.Header?.ChildContent
    </div>
</div>

@code
{
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        this.Layout.PropertyChanged += OnLayoutHeaderChanged;
    }

    private void OnLayoutHeaderChanged(object? sender, PropertyChangedEventArgs e)
    {
        if (e.PropertyName == nameof(ILayoutService.Header))
        {
            this.StateHasChanged();
        }
    }

    public void Dispose()
    {
        if (this.Layout != null)
            this.Layout.PropertyChanged -= OnLayoutHeaderChanged;
        GC.SuppressFinalize(this);
    }

}